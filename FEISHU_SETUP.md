# 飞书API配置指南

## 概述

本项目已集成飞书多维表格API，可以从飞书获取真实的文章数据。

## 配置步骤

### 1. 环境变量配置

项目根目录已创建 `.env.local` 文件，包含以下配置：

```env
# 飞书应用配置
VITE_FEISHU_APP_ID=cli_a80ae9b92022500e
VITE_FEISHU_APP_SECRET=geVSv8ztaIl1TghwF5YTTF37iy3Ef2ZO

# 多维表格配置
VITE_FEISHU_BASE_ID=Q5zmb2j53acAgts9nUPcJk3LnDh
VITE_FEISHU_TABLE_ID=tblYRp5M1mpFN5vQ
```

### 2. 飞书多维表格字段要求

请确保您的飞书多维表格包含以下字段：

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 标题 | 单行文本 | 文章标题 |
| 摘要 | 多行文本 | 文章摘要 |
| 金句 | 单行文本 | 精选金句 |
| 标签 | 多选 | 文章标签 |
| 原文链接 | URL | 原文链接 |
| 正文内容 | 多行文本 | 完整文章内容 |

### 3. 功能特性

- ✅ 自动获取飞书访问令牌
- ✅ 实时从多维表格获取文章数据
- ✅ 错误处理和fallback机制
- ✅ 加载状态和错误提示
- ✅ 手动刷新数据功能
- ✅ Toast通知反馈

### 4. 使用说明

1. 启动开发服务器：`npm run dev`
2. 访问首页，系统会自动尝试获取飞书数据
3. 如果飞书API调用失败，会自动使用fallback数据
4. 可以点击刷新按钮手动重新获取数据

### 5. 故障排除

#### 常见问题：

1. **CORS错误**：飞书API可能存在跨域限制，建议在生产环境中通过后端代理
2. **Token过期**：系统会自动处理token刷新
3. **字段映射错误**：请检查飞书表格字段名称是否与配置一致

#### 调试方法：

1. 打开浏览器开发者工具查看网络请求
2. 查看控制台错误信息
3. 检查Toast通知提示

### 6. 安全注意事项

- `.env.local` 文件已被 `.gitignore` 忽略，不会提交到版本控制
- 生产环境建议使用更安全的密钥管理方案
- 定期更新飞书应用密钥

## API文档参考

- [飞书开放平台文档](https://open.feishu.cn/document/)
- [多维表格API](https://open.feishu.cn/document/server-docs/docs/bitable-v1/)